<!DOCTYPE html><html lang="ko"><head> <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"><title></title><link rel="shortcut icon" href="/favicon.png"><link rel="manifest" href="/manifest.json">
<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/css/markdown.css">
<link href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&amp;display=swap" rel="stylesheet"><meta name="generator" content="Hexo 5.4.0"></head><body class="p-lo"><header><nav id="theme-nav"><div class="inner"><a class="title ui-pressable--opacity" href="/"><!--img(img=theme.nav.logo)-->전호균의 블로그</a><a class="nav-hand ui-pressable--opacity"><div class="nav-hand-indicator"></div></a><div class="nav-items"><div class="nav-item"><a class="nav-link ui-pressable--opacity" href="/about">소개<span class="nav-indicator"></span></a></div><div class="nav-item"><a class="nav-link ui-pressable--opacity" href="/projects">프로젝트<span class="nav-indicator"></span></a></div><div class="nav-item"><a class="nav-link ui-pressable--opacity" href="/archives">글 목록<span class="nav-indicator"></span></a></div><div class="nav-item nav-item-icon"><a class="nav-link ui-pressable--opacity" target="_blank" rel="noopener" href="https://github.com/dzonhog"><ion-icon name="logo-github"></ion-icon></a></div><div class="nav-item"><a class="nav-mode-switch ui-pressable--opacity"><ion-icon class="nav-dark" name="moon"></ion-icon><ion-icon class="nav-light" name="sunny"></ion-icon></a></div><!--if theme.nav.show_search_item//- partial('_partial/localsearch')
.search-header
  span.search-icon
    i.fa.fa-search
  .search-input-container
    input(
      autocomplete="off" 
      autocorrect="off" 
      autocapitalize="none"
      placeholder= "검색어를 입력하세요"
      spellcheck="false"
      type="text"
      id="search-input"
      )
  span.popup-btn-close
    i.fa.fa-times-circle
#search-result
//.nav-item.nav-item-search
  a.nav-link
    ion-icon(name=icons.search)--></div></div></nav></header><main><div class="article-container"><div class="article-header"><div class="inner"><h4 class="article-categories"><a class="ui-pressable--opacity" href="/category/%EA%B0%9C%EB%B0%9C/">개발</a><span class="separator">&#xE001;</span><a class="ui-pressable--opacity" href="/category/%EA%B0%9C%EB%B0%9C/%ED%95%99%EA%B5%90%ED%94%8C%EB%9F%AC%EC%8A%A4/">학교플러스</a><span class="separator">&#xE001;</span><a class="ui-pressable--opacity" href="/category/%EA%B0%9C%EB%B0%9C/%ED%95%99%EA%B5%90%ED%94%8C%EB%9F%AC%EC%8A%A4/%EB%85%B8%ED%8A%B8/">노트</a></h4><div class="article-head-date">2021. 07. 21.에 작성 / 2021. 07. 24.에 수정</div><h2 class="article-title">안드로이드 6(M) 이하에서 한글을 포함한 URL이 제대로 작동되지 않는 문제</h2></div></div><div class="divider horizontal"></div><div class="article-dis"><div class="article-sidebar" id="article-sidebar"><div class="inner"><div class="sidebar-container ui-surface"><div class="article-widget-head"><div class="h-date"><div class="h-date-write"><ion-icon name="document"></ion-icon><span>2021. 07. 21.</span></div></div><div class="h-title"><div class="h-title-category"><span>개발</span><span>학교플러스</span><span>노트</span></div><div class="h-title-title">안드로이드 6(M) 이하에서 한글을 포함한 URL이 제대로 작동되지 않는 문제</div></div></div><!--.article-widget-toceach item, index in toc
  .toc-item
    .toc-cur= index
--><div class="article-widget-toc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%EB%AC%B8%EC%A0%9C%EC%A0%90"><span class="toc-text">문제점</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%EC%98%88%EC%83%81"><span class="toc-text">예상</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%ED%95%B4%EA%B2%B0"><span class="toc-text">해결</span></a></li></ol></div></div></div></div><div class="article-body"><div class="inner markdown-body"><h2 id="문제점"><a href="#문제점" class="headerlink" title="문제점"></a>문제점</h2><p>안드로이드 6 이하 기기에서 학교 선택 시 학교 이름이나 종류(초등학교, 중학교…) 필터링 시 목록에 항상 0개만 노출되는 문제가 보고되었다. <del>최종 업데이트한 지 3개월이 넘게 몰랐다.</del></p>
<h2 id="예상"><a href="#예상" class="headerlink" title="예상"></a>예상</h2><p>Neis API 상에서 지역(관할 교육청) 코드는 <code>P10</code>, <code>E10</code> 등과 같이 기본 로마자와 숫자로만 이루어져 있다. 반면, 학교 이름이나 종류는 오직 한글로만 이루어져 있다.</p>
<p>그래서 안드로이드 버전에 따라 다르고, 지역 필터링은 작동하는 것을 보아 한글 인코딩 문제가 아닌가 생각했다.</p>
<h2 id="해결"><a href="#해결" class="headerlink" title="해결"></a>해결</h2><p>디버깅을 하다보니, 역시나 인코딩 문제가 맞았다. (<del>이걸 3개월 넘게 몰랐다는 건 엄청난 잘못이다.</del>)</p>
<p>해결방안으로는 API를 요청하기 전에 URL String에  <code>URLEncoder.encode (String s, String enc)</code>를 사용하면 된다.<br>(특별하게 다른 의도가 없다면 <code>enc</code>는 <code>UTF-8</code>로 하면 된다.)</p>
<p>(아마 안드로이드 6 이전엔 안드로이드 내부 인코딩이 UTF-8가 아니었기 때문에 발생한 것 같다. 자세한 건 이후에 찾아보려고 한다.)</p>
<p>안드로이드 6(마시멜로) 이하에서 학교 검색이 되지 않는 점 확인되었고, 해당 부분이 해결된 0.3.2a 버전이 업데이트 되었습니다. 수고스러우시겠지만 업데이트 후 한 번 더 시도해주시면 감사하겠습니다. 이용에 불편을 드려서 죄송합니다. 😥</p>
</div></div></div></div></main><footer><!--<footer><div class="inner">
    <div class="links">
        <% for (const i in theme.footer) { %>
        <div class="group">
            <h4 class="title"><%= i %></h4>
            <% for (const n in theme.footer[i]) { %>
            <a href="<%- theme.footer[i][n] %>" class="item" target="_blank"><%= n %></a>
            <% } %>
        </div>
        <% } %>
    </div>
    &copy; <%= date(new Date(), 'YYYY') %> <%= config.author || config.title %><br />
    <%= __('powered_by') %> <a href="http://hexo.io/" target="_blank">Hexo</a>
</div>
</footer>
--><div class="inner"> <div class="links"><div class="group"><h4 class="title">블로그</h4><a class="item ui-pressable--opacity" href="/">블로그</a><a class="item ui-pressable--opacity" href="/about">소개</a><a class="item ui-pressable--opacity" href="/archives">글 모음</a><a class="item ui-pressable--opacity" href="/projects">프로젝트</a><a class="item ui-pressable--opacity" href="/rss">RSS</a></div><div class="group"><h4 class="title">나</h4><a class="item ui-pressable--opacity" target="_blank" rel="noopener" href="https://github.com/dzonhog">GitHub</a><a class="item ui-pressable--opacity" href="mailto:akzm9999@gmail.com">Email</a></div></div><div class="info"><span class="text"><strong>전호균</strong>이 💙를 담아 만들었습니다.<br> 테마는 따로 공유하진 않습니다.<br> <br> Copyright © JEON Hogyun 2020-2021.<br> All Rights Reserved.</span><!--img.img(src="/theme-img/github-mark-dark.png")--></div></div></footer>
<script src="/js/main.js"></script>
<script src="/js/colortheme.js"></script>
<script src="/js/local-search.js"></script>
<script src="/js/nav.js"></script>
<script src="/js/article.js"></script>
<!-- Icons--><script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script><script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script><style>body.p-lo {
  transition: none !important;
  -o-transition: none !important;
  -webkit-transition: none !important;
  -ms-transition: none !important;
  -moz-transition: none !important;
}
</style><script>window.addEventListener('load', (e) => {
  document.body.classList.remove('p-lo');
});</script></body></html>