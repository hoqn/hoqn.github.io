<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>안드로이드 6(M) 이하에서 한글을 포함한 URL이 제대로 작동되지 않는 문제 - HOQN</title><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="/css/main.css">
<link href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" rel="stylesheet" type="text/css"><link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&amp;display=swap" rel="stylesheet"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"><script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script><script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script><script src="/js/color-scheme.js"> </script><meta name="generator" content="Hexo 5.4.0"></head><body><nav class="ui-navbar --fixed" role="navigation"><div class="container"><div class="ui-navbar-left"><div class="ui-navbar-brand"><a class="ui-navbar-item ui-pressable --light" href="/"><img class="ui-brand-logo" src="/brand-logo.svg" alt="" srcset=""></a></div></div><div class="ui-navbar-right"><ul><li class="ui-navbar-item"><a class="ui-pressable --light" id="color-scheme-switch"><ion-icon id="color-scheme-button-dark" name="moon-outline" size="medium"></ion-icon><ion-icon id="color-scheme-button-light" name="sunny-outline" size="medium"></ion-icon></a></li><!--li.ui-navbar-item: a(href=url_for(config.archive_dir)).ui-pressable.--light 블로그--><!--li.ui-navbar-item: a(href=url_for("")).ui-pressable.--light 검색--></ul></div></div></nav><!--nav.nav.nav-main.container
  a.brand(href=url_for('/')).ui-pressable.--light
    img.brand-logo(src="/brand-logo-within.svg", alt="", srcset="")--><div class="ui-navbar-place"></div><section class="article-head"><div class="container"><h1 class="article-title-icon">📦</h1><h1 class="article-title ui-title-1">안드로이드 6(M) 이하에서 한글을 포함한 URL이 제대로 작동되지 않는 문제</h1></div></section><section class="article-body"><div class="container"><div class="article-body-top"><span class="primary-color ui-text-bold"><a class="category-item" href="/category/%EA%B0%9C%EB%B0%9C/">개발</a><a class="category-item" href="/category/%EA%B0%9C%EB%B0%9C/%ED%95%99%EA%B5%90%ED%94%8C%EB%9F%AC%EC%8A%A4/">학교플러스</a><a class="category-item" href="/category/%EA%B0%9C%EB%B0%9C/%ED%95%99%EA%B5%90%ED%94%8C%EB%9F%AC%EC%8A%A4/%EB%85%B8%ED%8A%B8/">노트</a></span><span>2021년 07월 21일</span></div><div class="article-body-content markdown-body"><h2 id="문제점"><a href="#문제점" class="headerlink" title="문제점"></a>문제점</h2><p>안드로이드 6 이하 기기에서 학교 선택 시 학교 이름이나 종류(초등학교, 중학교…) 필터링 시 목록에 항상 0개만 노출되는 문제가 보고되었다. <del>최종 업데이트한 지 3개월이 넘게 몰랐다.</del></p>
<h2 id="예상"><a href="#예상" class="headerlink" title="예상"></a>예상</h2><p>Neis API 상에서 지역(관할 교육청) 코드는 <code>P10</code>, <code>E10</code> 등과 같이 기본 로마자와 숫자로만 이루어져 있다. 반면, 학교 이름이나 종류는 오직 한글로만 이루어져 있다.</p>
<p>그래서 안드로이드 버전에 따라 다르고, 지역 필터링은 작동하는 것을 보아 한글 인코딩 문제가 아닌가 생각했다.</p>
<h2 id="해결"><a href="#해결" class="headerlink" title="해결"></a>해결</h2><p>디버깅을 하다보니, 역시나 인코딩 문제가 맞았다. (<del>이걸 3개월 넘게 몰랐다는 건 엄청난 잘못이다.</del>)</p>
<p>해결방안으로는 API를 요청하기 전에 URL String에  <code>URLEncoder.encode (String s, String enc)</code>를 사용하면 된다.<br>(특별하게 다른 의도가 없다면 <code>enc</code>는 <code>UTF-8</code>로 하면 된다.)</p>
<p>(아마 안드로이드 6 이전엔 안드로이드 내부 인코딩이 UTF-8가 아니었기 때문에 발생한 것 같다. 자세한 건 이후에 찾아보려고 한다.)</p>
</div><div class="article-body-bottom"><span class="primary-color ui-text-bold">댓글</span><div class="comment-container"><div class="show-iff-light"><script src="https://utteranc.es/client.js" repo="hoqn/hoqn.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="async"></script></div><div class="show-iff-dark"><script src="https://utteranc.es/client.js" repo="hoqn/hoqn.github.io" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async="async"></script></div></div></div></div></section></body><footer><div class="container py-4"><p></p>&copy; 2021-2022 | JEON Hogyun</div></footer></html>